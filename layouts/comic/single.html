<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ .Title }} | STUDIO MeowToon</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <div class="hugo-episode">Episode {{ .Params.episode }}</div>
  <div class="hugo-title">{{ .Title }}</div>
  <div class="hugo-images">
    {{ range .Params.images }}
      <img src="{{ . | relURL }}" alt="comic panel">
    {{ end }}
    {{ .Content }}
    {{ with .Params.description }}
      <div class="hugo-description">{{ . }}</div>
    {{ end }}
  </div>
  <div class="hugo-nav">
  {{ with .NextInSection }}<a href="{{ .RelPermalink }}">◀️ Prev</a>{{ else }}<span></span>{{ end }}
  <a href="{{ .Parent.RelPermalink }}">⤴️ List</a>
  {{ with .PrevInSection }}<a href="{{ .RelPermalink }}">Next ▶️</a>{{ else }}<span></span>{{ end }}
  </div>
  <script>
  // スワイプで前後話に遷移
  let touchStartX = null;
  document.addEventListener('touchstart', function(e) {
    touchStartX = e.changedTouches[0].screenX;
  });
  document.addEventListener('touchend', function(e) {
    if (touchStartX === null) return;
    let dx = e.changedTouches[0].screenX - touchStartX;
    if (dx > 40) {
      // 右スワイプ: 前の話
      let prev = document.querySelector('.hugo-nav a:first-child');
      if (prev && prev.getAttribute('href')) location.href = prev.getAttribute('href');
    } else if (dx < -40) {
      // 左スワイプ: 次の話
      let next = document.querySelector('.hugo-nav a:last-child');
      if (next && next.getAttribute('href')) location.href = next.getAttribute('href');
    }
    touchStartX = null;
  });
  </script>
</body>
</html>
